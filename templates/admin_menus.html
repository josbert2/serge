{% extends "dashboard_layout.html" %}

{% block content %}
<div class="flex justify-between items-center mb-8">
    <h1 class="text-3xl font-bold text-base-content">Menu Management</h1>
    <a class="btn btn-primary" href="{{ url_for('add_new_menu') }}"><i class="fas fa-plus"></i> Create New Menu</a>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
    {% for menu in menus %}
    <div class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300">
        {% if menu.img_url %}
        <figure class="h-48 overflow-hidden bg-base-300">
            <img src="{{ menu.img_url }}"
                class="w-full h-full object-cover transition-transform duration-500 hover:scale-110"
                alt="{{ menu.title }}" />
        </figure>
        {% endif %}
        <div class="card-body">
            <div class="flex justify-between items-start">
                <h2 class="card-title text-xl">
                    {{ menu.title }}
                </h2>
                <div class="badge {{ 'badge-success' if menu.is_active else 'badge-ghost' }} badge-sm gap-1">
                    <i class="fas {{ 'fa-check' if menu.is_active else 'fa-times' }} text-xs"></i>
                    {{ 'Active' if menu.is_active else 'Draft' }}
                </div>
            </div>
            {% if menu.subtitle %}
            <p class="text-sm opacity-70 mt-1">{{ menu.subtitle }}</p>
            {% endif %}

            <div class="card-actions justify-between items-center mt-4 pt-4 border-t">
                <a href="{{ url_for('toggle_menu_status', menu_id=menu.id) }}"
                    class="flex items-center gap-2 cursor-pointer group hover:opacity-80 transition-opacity"
                    title="Toggle active status">
                    <input type="checkbox" class="toggle toggle-success toggle-sm pointer-events-none" {{ 'checked' if
                        menu.is_active else '' }} />
                    <span class="text-xs font-semibold {{ 'text-success' if menu.is_active else 'text-gray-400' }}">
                        {{ 'Visible' if menu.is_active else 'Hidden' }}
                    </span>
                </a>
                <div class="flex gap-2">
                    <a href="{{ url_for('edit_menu', menu_id=menu.id) }}" class="btn btn-sm btn-ghost text-info"><i
                            class="fas fa-edit"></i></a>
                    <a href="{{ url_for('delete_menu', menu_id=menu.id) }}" class="btn btn-sm btn-ghost text-error"
                        onclick="return confirm('Are you sure you want to delete this menu?');"><i
                            class="fas fa-trash"></i></a>
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <div class="col-span-full">
        <div class="alert alert-info shadow-lg">
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                    class="stroke-current flex-shrink-0 w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <span>No menus found. Click "Create New Menu" to get started.</span>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}